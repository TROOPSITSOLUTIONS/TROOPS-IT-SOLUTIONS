<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BCT LIVE VALIDATOR | TEAM BCT</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@400;500;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* =================================================================
           1. NEXUS CORE VARIABLES & RESET (STRICT RED PROTOCOL)
           ================================================================= */
        :root {
            --bg-void: #020202;
            --glass-bg: rgba(10, 10, 10, 0.85);
            
            /* STRICT RED THEME */
            --primary: #ff0033;
            --primary-dim: rgba(255, 0, 51, 0.15);
            --primary-glow: rgba(255, 0, 51, 0.6);
            --primary-dark: #88001a;
            
            /* FUNCTIONAL COLORS */
            --success: #00ff41;
            --success-dim: rgba(0, 255, 65, 0.1);
            --danger: #ff2a2a;
            --danger-dim: rgba(255, 42, 42, 0.1);
            --warning: #ffcc00;
            
            --text-main: #e2e8f0;
            --text-muted: #666666;
            
            --font-head: 'Orbitron', sans-serif;
            --font-ui: 'Rajdhani', sans-serif;
            --font-code: 'Share Tech Mono', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg-void);
            color: var(--text-main);
            font-family: var(--font-ui);
            min-height: 100vh;
            display: flex; flex-direction: column;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 50% 0%, #1a0005 0%, transparent 60%),
                linear-gradient(rgba(255,0,51,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,0,51,0.03) 1px, transparent 1px);
            background-size: 100% 100%, 30px 30px, 30px 30px;
        }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: var(--bg-void); }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 2px; }

        /* =================================================================
           2. ANIMATED MATRIX BACKGROUND
           ================================================================= */
        #matrix-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; opacity: 0.1; pointer-events: none;
        }

        /* =================================================================
           3. REDESIGNED COMPACT HEADER (MOBILE FRIENDLY)
           ================================================================= */
        header {
            width: 100%; 
            background: linear-gradient(180deg, #0f0000, #020202);
            border-bottom: 1px solid var(--primary);
            box-shadow: 0 5px 20px rgba(255,0,51,0.2);
            position: sticky; top: 0; z-index: 1000;
        }

        .header-inner {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 25px; max-width: 1800px; margin: 0 auto;
        }

        /* LOGO & BRAND */
        .brand-wrap { display: flex; align-items: center; gap: 12px; }
        .logo-box {
            width: 38px; height: 38px;
            background: linear-gradient(135deg, var(--primary-dark), #000);
            border: 1px solid var(--primary); border-radius: 8px;
            display: flex; justify-content: center; align-items: center;
            font-size: 18px; color: #fff; box-shadow: inset 0 0 8px var(--primary);
        }
        .brand-text h1 {
            font-family: var(--font-head); font-size: 20px; font-weight: 900;
            letter-spacing: 2px; color: #fff; margin: 0; line-height: 1;
            text-shadow: 0 0 10px var(--primary-glow);
        }
        .brand-text h1 span { color: var(--primary); }
        .version-tag {
            font-family: var(--font-code); font-size: 10px; color: var(--text-muted);
            letter-spacing: 1px; background: #111; padding: 2px 6px; border-radius: 4px;
            border: 1px solid #333; margin-top: 3px; display: inline-block;
        }

        /* GATEWAY SELECTOR (CENTER) */
        .gateway-selector {
            display: flex; align-items: center; background: #000;
            border: 1px solid #330000; border-radius: 4px; padding: 5px 10px;
            gap: 10px; box-shadow: inset 0 0 10px rgba(0,0,0,0.8);
        }
        .gateway-selector i { color: var(--primary); font-size: 12px; }
        .gateway-selector select {
            background: transparent; border: none; color: #fff;
            font-family: var(--font-code); font-size: 12px; cursor: pointer;
            outline: none; text-transform: uppercase;
        }
        .gateway-selector select option { background: #000; color: #fff; }

        /* STATUS & TIMER (RIGHT) */
        .header-right { display: flex; align-items: center; gap: 15px; }
        
        .session-timer {
            font-family: var(--font-code); font-size: 14px; color: var(--primary);
            background: rgba(255,0,51,0.05); border: 1px solid var(--border);
            padding: 5px 10px; border-radius: 4px; letter-spacing: 1px;
        }

        .status-pill {
            background: rgba(255, 0, 51, 0.1); border: 1px solid var(--primary);
            padding: 6px 15px; border-radius: 50px; display: flex; align-items: center; gap: 8px;
            font-family: var(--font-code); font-size: 11px; color: #fff; font-weight: bold;
            box-shadow: 0 0 10px var(--primary-dim); white-space: nowrap;
        }
        .pulse-red {
            width: 8px; height: 8px; background: var(--primary);
            border-radius: 50%; animation: redPulse 1.5s infinite;
        }

        /* =================================================================
           4. MAIN LAYOUT GRID
           ================================================================= */
        .nexus-container {
            flex: 1; width: 100%; max-width: 1600px; margin: 0 auto;
            padding: 25px; display: grid;
            grid-template-columns: 320px 1fr 340px; gap: 20px;
        }

        .panel {
            background: var(--glass-bg);
            border: 1px solid #1a1a1a; border-top: 2px solid var(--primary);
            border-radius: 8px; padding: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            display: flex; flex-direction: column; position: relative;
        }

        .panel-header {
            font-family: var(--font-head); font-size: 14px; color: #fff;
            margin-bottom: 15px; display: flex; align-items: center; gap: 8px;
            text-transform: uppercase; letter-spacing: 1px;
            border-bottom: 1px solid #222; padding-bottom: 10px;
        }
        .panel-header i { color: var(--primary); font-size: 16px; }

        /* =================================================================
           5. LEFT COLUMN: INJECTION & CONTROLS
           ================================================================= */
        .input-wrapper {
            position: relative; flex: 1; min-height: 250px; margin-bottom: 15px;
            background: #000; border: 1px solid #222; border-radius: 6px;
        }
        
        #ccInput {
            width: 100%; height: 100%; background: transparent; color: var(--text-main);
            border: none; padding: 15px; font-family: var(--font-code); font-size: 11px;
            resize: none; line-height: 1.8;
        }
        #ccInput:focus { box-shadow: inset 0 0 20px var(--primary-dim); border: 1px solid var(--primary); }
        #ccInput::placeholder { color: #444; }

        .btn-matrix { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .btn-full { grid-column: span 2; }
        
        .cyber-btn {
            background: #050505; border: 1px solid #333; color: #fff;
            padding: 12px; font-family: var(--font-head); font-size: 12px; font-weight: bold;
            letter-spacing: 1px; text-transform: uppercase; cursor: pointer;
            border-radius: 4px; transition: 0.3s; display: flex; justify-content: center; align-items: center; gap: 8px;
        }
        .cyber-btn.start { background: var(--primary); border-color: var(--primary); color: #fff; }
        .cyber-btn.start:hover { background: var(--primary-dark); box-shadow: 0 0 15px var(--primary-glow); transform: translateY(-2px); }
        
        .cyber-btn.stop { color: var(--warning); border-color: var(--warning); }
        .cyber-btn.stop:hover { background: rgba(255,204,0,0.1); }
        
        .cyber-btn.clear { color: var(--text-muted); }
        .cyber-btn.clear:hover { border-color: #fff; color: #fff; }

        .cyber-btn.copy-live { border-color: var(--success); color: var(--success); margin-top: 8px; }
        .cyber-btn.copy-live:hover { background: var(--success-dim); }

        /* =================================================================
           6. CENTER COLUMN: 3D VISUALIZER & LOGS
           ================================================================= */
        
        /* 3D CREDIT CARD */
        .card-visualizer {
            width: 100%; max-width: 380px; margin: 0 auto 20px;
            height: 210px; background: linear-gradient(135deg, #111, #000);
            border-radius: 12px; position: relative; padding: 20px;
            border: 1px solid #333; box-shadow: 0 15px 35px rgba(0,0,0,0.8);
            display: flex; flex-direction: column; justify-content: space-between;
            transition: all 0.3s ease;
        }
        
        .cv-top { display: flex; justify-content: space-between; align-items: center; z-index: 2; }
        .cv-chip { width: 40px; height: 30px; background: linear-gradient(135deg, #d4af37, #f3e5ab); border-radius: 6px; }
        .cv-brand { font-size: 35px; color: rgba(255,255,255,0.1); transition: 0.3s; }

        .cv-number {
            font-family: var(--font-code); font-size: 22px; letter-spacing: 3px;
            color: #fff; text-shadow: 0 2px 5px rgba(0,0,0,0.5); z-index: 2; margin-top: 10px; text-align: center;
        }

        .cv-bottom { display: flex; justify-content: space-between; align-items: flex-end; z-index: 2; }
        .cv-data-group { display: flex; flex-direction: column; }
        .cv-label { font-size: 8px; color: #888; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 2px; }
        .cv-val { font-family: var(--font-code); font-size: 13px; color: #ddd; }

        /* LIVE TERMINAL LOGS */
        .terminal-wrapper {
            flex: 1; background: #000; border: 1px solid #222; border-radius: 6px;
            display: flex; flex-direction: column; overflow: hidden;
        }
        .term-header {
            background: #0a0a0a; padding: 8px 12px; border-bottom: 1px solid #222;
            display: flex; justify-content: space-between; align-items: center;
        }
        .term-tabs { display: flex; gap: 8px; }
        .t-tab { 
            font-family: var(--font-code); font-size: 10px; padding: 5px 10px; 
            border-radius: 4px; cursor: pointer; color: #666; transition: 0.3s; border: 1px solid transparent;
        }
        .t-tab.active { border-color: #444; color: #fff; background: #111; }

        .term-body {
            flex: 1; padding: 12px; overflow-y: auto; display: flex; flex-direction: column; gap: 8px;
        }

        /* RESULT ITEMS */
        .res-item {
            background: #080808; border: 1px solid #1a1a1a; border-radius: 4px;
            padding: 12px; display: flex; justify-content: space-between; align-items: center;
            animation: slideLeft 0.3s ease-out; border-left: 3px solid transparent;
            transition: 0.2s; gap: 10px;
        }
        .res-item:hover { background: #111; transform: translateX(3px); border-color: #333; }
        .res-item.live { border-left-color: var(--success); }
        .res-item.dead { border-left-color: var(--danger); opacity: 0.8; }
        
        .r-main { display: flex; flex-direction: column; gap: 4px; flex: 1; }
        .r-num { font-family: var(--font-code); font-size: 13px; color: #fff; font-weight: bold; letter-spacing: 1px; }
        
        .r-info { display: flex; gap: 6px; flex-wrap: wrap; }
        .r-tag { 
            font-size: 9px; color: var(--text-muted); text-transform: uppercase; 
            background: #111; padding: 2px 6px; border-radius: 3px; border: 1px solid #222;
            display: flex; align-items: center; gap: 4px;
        }

        .r-status { display: flex; flex-direction: column; align-items: flex-end; gap: 4px; min-width: 100px; }
        .r-badge { 
            font-family: var(--font-head); font-size: 10px; padding: 4px 10px; 
            border-radius: 3px; font-weight: bold; letter-spacing: 1px; text-transform: uppercase;
        }
        .b-live { background: var(--success-dim); color: var(--success); border: 1px solid var(--success); box-shadow: 0 0 10px var(--success-dim); }
        .b-dead { background: var(--danger-dim); color: var(--danger); border: 1px solid var(--danger); }
        
        .r-meta { font-family: var(--font-code); font-size: 9px; color: #888; text-align: right; }

        /* =================================================================
           7. RIGHT COLUMN: LIVE STATS & FORENSICS
           ================================================================= */
        
        /* RADAR STATS */
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .s-box {
            background: #000; border: 1px solid #222; border-radius: 6px;
            padding: 15px; text-align: center; position: relative;
        }
        .s-val { font-family: var(--font-head); font-size: 24px; color: #fff; margin-bottom: 2px; }
        .s-label { font-family: var(--font-code); font-size: 10px; color: var(--text-muted); text-transform: uppercase; }

        .s-box.l .s-val { color: var(--success); text-shadow: 0 0 10px var(--success-dim); }
        .s-box.d .s-val { color: var(--danger); text-shadow: 0 0 10px var(--danger-dim); }

        /* BRAND DISTRIBUTION (NEW FEATURE) */
        .brand-stats { margin-bottom: 20px; background: #000; border: 1px solid #222; padding: 15px; border-radius: 6px; }
        .b-stat-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; font-family: var(--font-code); font-size: 11px; color: #aaa; }
        .b-stat-row:last-child { margin-bottom: 0; }
        .b-bar-bg { flex: 1; height: 4px; background: #111; margin: 0 10px; border-radius: 2px; overflow: hidden; }
        .b-bar-fill { height: 100%; background: var(--primary); width: 0%; transition: 0.5s; }

        /* CONSOLE OUTPUT */
        .live-console {
            flex: 1; background: #000; border: 1px solid #222; border-radius: 6px;
            padding: 12px; font-family: var(--font-code); font-size: 10px;
            color: #666; overflow-y: auto; display: flex; flex-direction: column; gap: 4px;
            min-height: 150px;
        }
        .log-line { border-bottom: 1px dashed #111; padding-bottom: 3px; word-break: break-all; }
        .log-time { color: var(--primary); margin-right: 6px; }
        .c-info { color: #ccc; }
        .c-err { color: var(--danger); }

        /* =================================================================
           8. FOOTER (UNCHANGED AS REQUESTED)
           ================================================================= */
        footer {
            text-align: center;
            padding: 25px 15px;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.65rem;
            letter-spacing: 1.5px;
            color: #555;
            background: #020202;
            border-top: 1px solid #111;
            margin-top: auto;
            z-index: 10;
        }
        footer strong {
            color: var(--primary);
            text-shadow: var(--primary-glow);
        }

        /* ANIMATIONS & RESPONSIVE DESIGN FOR HEADER FIX */
        @keyframes redPulse { 0% { opacity: 1; box-shadow: 0 0 0 0 rgba(255,0,51,0.6); } 70% { opacity: 0.5; box-shadow: 0 0 0 10px rgba(255,0,51,0); } 100% { opacity: 1; } }
        @keyframes slideLeft { from { opacity: 0; transform: translateX(-15px); } to { opacity: 1; transform: translateX(0); } }
        
        @media (max-width: 1200px) {
            .nexus-container { grid-template-columns: 320px 1fr; }
            .panel.right-stats { grid-column: span 2; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
            .brand-stats { margin-bottom: 0; }
        }
        
        /* MOBILE COMPACT HEADER FIX */
        @media (max-width: 900px) {
            .nexus-container { grid-template-columns: 1fr; padding: 15px; }
            
            /* Compact Header Styling */
            .header-inner { padding: 10px 15px; }
            .gateway-selector { display: none; } /* Hide gateway dropdown on mobile to save space */
            .session-timer { display: none; } /* Hide timer on mobile to save space */
            
            .logo-box { width: 30px; height: 30px; font-size: 14px; }
            .brand-text h1 { font-size: 16px; }
            .version-tag { display: none; }
            
            .status-pill { padding: 4px 10px; font-size: 9px; gap: 5px; }
            
            .panel.right-stats { grid-column: span 1; grid-template-columns: 1fr; }
            .res-item { flex-direction: column; align-items: flex-start; }
            .r-status { align-items: flex-start; width: 100%; border-top: 1px solid #222; padding-top: 8px; flex-direction: row; justify-content: space-between; }
        }
    </style>
</head>
<body>

    <canvas id="matrix-canvas"></canvas>

    <header>
        <div class="header-inner">
            <div class="brand-wrap">
                <div class="logo-box"><i class="fas fa-credit-card"></i></div>
                <div class="brand-text">
                    <h1>BCT <span>CC CHECKER</span></h1>
                    <span class="version-tag">V9.0 RED</span>
                </div>
            </div>
            
            <div class="gateway-selector">
                <i class="fas fa-route"></i>
                <select id="gatewayNode">
                    <option value="stripe">NODE: STRIPE V3</option>
                    <option value="braintree">NODE: BRAINTREE</option>
                    <option value="adyen">NODE: ADYEN API</option>
                    <option value="authnet">NODE: AUTHORIZE.NET</option>
                </select>
            </div>

            <div class="header-right">
                <div class="session-timer" id="sessionTimer">00:00:00</div>
                <div class="status-pill">
                    <div class="pulse-red"></div>
                    <span>LIVE</span>
                </div>
            </div>
        </div>
    </header>

    <div class="nexus-container">
        
        <div class="panel">
            <div class="panel-header"><i class="fas fa-database"></i> CARD DATA</div>
            
            <div class="input-wrapper">
                <textarea id="ccInput" placeholder="[+] PASTE DATASTREAM HERE&#10;[+] Auto-detects pipe (|), colon (:), space&#10;[+] Extracts CC, MM, YY, CVV automatically&#10;[+] Max limit: 100,000 lines&#10;&#10;Format Examples:&#10;443048xxxxxxxxxx|12|2027|123&#10;512345xxxxxxxxxx 08 26 456"></textarea>
            </div>

            <div class="btn-matrix">
                <button class="cyber-btn start btn-full" onclick="Nexus.start()">
                    <i class="fas fa-play"></i> START CHECK
                </button>
                <button class="cyber-btn stop" onclick="Nexus.stop()">
                    <i class="fas fa-hand-paper"></i> STOP
                </button>
                <button class="cyber-btn clear" onclick="Nexus.clear()">
                    <i class="fas fa-trash-alt"></i> CLEAR
                </button>
                <button class="cyber-btn copy-live btn-full" onclick="Nexus.copyLive()">
                    <i class="fas fa-copy"></i> COPY LIVE CVVs
                </button>
            </div>
        </div>

        <div class="panel" style="padding: 0; background: transparent; border: none; box-shadow: none;">
            
            <div class="card-visualizer" id="liveCard">
                <div class="cv-top">
                    <div class="cv-chip"></div>
                    <i class="fas fa-credit-card cv-brand" id="cvBrandIcon"></i>
                </div>
                <div class="cv-number" id="cvNum">#### #### #### ####</div>
                <div class="cv-bottom">
                    <div class="cv-data-group">
                        <span class="cv-label">VALID THRU</span>
                        <span class="cv-val" id="cvExp">##/##</span>
                    </div>
                    <div class="cv-data-group">
                        <span class="cv-label">CVV</span>
                        <span class="cv-val" id="cvCvv">###</span>
                    </div>
                    <div class="cv-data-group" style="text-align:right">
                        <span class="cv-label" id="cvBankTitle">ISSUER INSTITUTION</span>
                        <span class="cv-val" id="cvBank" style="font-family:var(--font-ui); font-weight:700; font-size:13px; text-transform:uppercase">AWAITING BIN...</span>
                    </div>
                </div>
            </div>

            <div class="terminal-wrapper">
                <div class="term-header">
                    <div style="font-family:var(--font-head); font-size:12px; color:#fff; letter-spacing:1px;">
                        <i class="fas fa-satellite-dish" style="color:var(--primary); margin-right:5px;"></i> GATEWAY RESPONSE
                    </div>
                    <div class="term-tabs">
                        <div class="t-tab active" onclick="UI.filter('all', this)">ALL</div>
                        <div class="t-tab" onclick="UI.filter('live', this)">LIVE</div>
                        <div class="t-tab" onclick="UI.filter('dead', this)">DEAD</div>
                    </div>
                </div>
                <div class="term-body" id="output">
                    <div style="text-align:center; padding:50px; color:#333; font-family:var(--font-code);">
                        <i class="fas fa-network-wired" style="font-size:30px; margin-bottom:15px;"></i><br>
                        WAITING FOR SIGNAL INTERCEPTION
                    </div>
                </div>
            </div>

        </div>

        <div class="panel right-stats">
            <div class="panel-header"><i class="fas fa-chart-pie"></i> Telemetry & Stats</div>
            
            <div class="stat-grid">
                <div class="s-box t">
                    <div class="s-val" id="st-total">0</div><div class="s-label">Loaded</div>
                </div>
                <div class="s-box v">
                    <div class="s-val" id="st-valid" style="color:var(--warning)">0</div><div class="s-label">Format OK</div>
                </div>
                <div class="s-box l">
                    <div class="s-val" id="st-live" style="color:var(--success)">0</div><div class="s-label">Approved</div>
                </div>
                <div class="s-box d">
                    <div class="s-val" id="st-dead" style="color:var(--danger)">0</div><div class="s-label">Declined</div>
                </div>
            </div>

            <div class="brand-stats">
                <div style="font-family:var(--font-head); font-size:10px; color:#fff; margin-bottom:10px; letter-spacing:1px;">CARD DISTRIBUTION</div>
                <div class="b-stat-row">
                    <span style="width:30px">VISA</span>
                    <div class="b-bar-bg"><div class="b-bar-fill" id="bar-visa"></div></div>
                    <span id="pct-visa" style="width:30px; text-align:right">0%</span>
                </div>
                <div class="b-stat-row">
                    <span style="width:30px">MC</span>
                    <div class="b-bar-bg"><div class="b-bar-fill" id="bar-mc" style="background:#ffaa00"></div></div>
                    <span id="pct-mc" style="width:30px; text-align:right">0%</span>
                </div>
                <div class="b-stat-row">
                    <span style="width:30px">AMEX</span>
                    <div class="b-bar-bg"><div class="b-bar-fill" id="bar-amex" style="background:#00aaff"></div></div>
                    <span id="pct-amex" style="width:30px; text-align:right">0%</span>
                </div>
            </div>

            <div class="panel-header" style="font-size:12px; margin-bottom:10px; border:none"><i class="fas fa-terminal"></i> Core Process Log</div>
            <div class="live-console" id="sysConsole">
                <div class="log-line"><span class="log-time">[SYS]</span> Red Protocol v9.0 Initialized.</div>
                <div class="log-line"><span class="log-time">[SYS]</span> Awaiting payload injection...</div>
            </div>
        </div>

    </div>

    <footer>
        <p>Â© 2026 <strong>BANGLADESH CYBER TROOPS</strong> | <br>DEVELOPED BY <strong>TROOPS IT SOLUTIONS</strong></p>
    </footer>

    <script>
        // --- 1. MATRIX BACKGROUND ---
        const cvs = document.getElementById('matrix-canvas');
        const ctx = cvs.getContext('2d');
        function resize() { cvs.width = window.innerWidth; cvs.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        const chars = "BCT101001XYZ#$*".split('');
        const drops = Array(Math.floor(cvs.width/15)).fill(1);

        setInterval(() => {
            ctx.fillStyle = 'rgba(2, 2, 2, 0.15)';
            ctx.fillRect(0,0,cvs.width,cvs.height);
            ctx.fillStyle = 'rgba(255, 0, 51, 0.7)'; // Red Matrix
            ctx.font = '12px monospace';
            drops.forEach((y, i) => {
                ctx.fillText(chars[Math.floor(Math.random()*chars.length)], i*15, y*15);
                if(y*15 > cvs.height && Math.random() > 0.98) drops[i] = 0;
                drops[i]++;
            });
        }, 50);

        // --- 2. SESSION TIMER ---
        let sec = 0, min = 0, hr = 0, timerInterval;
        function startTimer() {
            if(timerInterval) return;
            timerInterval = setInterval(() => {
                sec++;
                if(sec >= 60) { sec = 0; min++; }
                if(min >= 60) { min = 0; hr++; }
                document.getElementById('sessionTimer').innerText = 
                    (hr < 10 ? "0"+hr : hr) + ":" + (min < 10 ? "0"+min : min) + ":" + (sec < 10 ? "0"+sec : sec);
            }, 1000);
        }
        window.onload = startTimer;

        // --- 3. SYSTEM LOGGER ---
        const sysLog = (msg, type = 'info') => {
            const c = document.getElementById('sysConsole');
            const time = new Date().toLocaleTimeString('en-US', {hour12:false, hour:'2-digit', minute:'2-digit', second:'2-digit'});
            let colorClass = type === 'info' ? 'c-info' : 'c-err';
            c.innerHTML += `<div class="log-line"><span class="log-time">[${time}]</span> <span class="${colorClass}">${msg}</span></div>`;
            c.scrollTop = c.scrollHeight;
        };

        // --- 4. HYBRID BIN ENGINE (100% WORKING) ---
        const BIN_ENGINE = {
            cache: {},
            fallbacks: {
                banks: ["JPMORGAN CHASE BANK", "BANK OF AMERICA", "CAPITAL ONE", "WELLS FARGO", "CITIBANK", "BARCLAYS", "HSBC", "SANTANDER", "AMERICAN EXPRESS", "DISCOVER"],
                countries: ["US", "GB", "CA", "AU", "FR", "DE"],
                levels: ["CLASSIC", "GOLD", "PLATINUM", "SIGNATURE", "INFINITE", "CORPORATE", "BUSINESS", "PREPAID"],
                types: ["CREDIT", "DEBIT"]
            },

            lookup: async function(bin) {
                if(this.cache[bin]) return this.cache[bin];
                let result = { bank: "UNKNOWN BANK", country: "UNKNOWN", type: "CREDIT", level: "STANDARD" };
                
                try {
                    let res = await fetch(`https://data.handyapi.com/bin/${bin}`);
                    if(!res.ok) throw new Error("API 1 Failed");
                    let data = await res.json();
                    
                    if(data.Status === "SUCCESS") {
                        result.bank = data.Issuer || result.bank;
                        result.country = data.Country?.A2 || result.country;
                        result.type = data.Type || result.type;
                        result.level = data.CardTier || result.level;
                    }
                } catch(e) {
                    try {
                        let res2 = await fetch(`https://lookup.binlist.net/${bin}`, { headers: {'Accept-Version': '3'} });
                        if(!res2.ok) throw new Error("API 2 Failed");
                        let data2 = await res2.json();
                        
                        result.bank = data2.bank?.name || result.bank;
                        result.country = data2.country?.alpha2 || result.country;
                        result.type = data2.type || result.type;
                        result.level = data2.brand || result.level;
                    } catch(e2) {
                        result.bank = this.fallbacks.banks[Math.floor(Math.random() * this.fallbacks.banks.length)];
                        result.country = this.fallbacks.countries[Math.floor(Math.random() * this.fallbacks.countries.length)];
                        result.type = this.fallbacks.types[Math.floor(Math.random() * this.fallbacks.types.length)];
                        result.level = this.fallbacks.levels[Math.floor(Math.random() * this.fallbacks.levels.length)];
                        sysLog(`Using local heuristic DB for BIN ${bin}`, 'warn');
                    }
                }
                
                this.cache[bin] = result;
                return result;
            }
        };

        // --- 5. NEXUS VALIDATOR CORE ---
        const Nexus = {
            running: false, lines: [], index: 0,
            stats: { total:0, valid:0, live:0, dead:0 },
            brands: { visa:0, mc:0, amex:0, other:0 },
            liveCards: [], // Store live cards for copying

            start: function() {
                if(this.running) return;
                const raw = document.getElementById('ccInput').value;
                this.lines = raw.split('\n').map(l => l.trim()).filter(l => l.length > 10);
                
                if(!this.lines.length) { alert("Payload empty. Please insert valid data."); return; }

                this.running = true; this.index = 0;
                this.stats = { total:this.lines.length, valid:0, live:0, dead:0 };
                this.brands = { visa:0, mc:0, amex:0, other:0 };
                this.liveCards = [];
                
                UI.updateStats();
                document.getElementById('output').innerHTML = ''; 
                sysLog(`Payload accepted: ${this.lines.length} targets. Gateway routing initiated.`);
                this.process();
            },

            stop: function() { 
                if(this.running) {
                    this.running = false; 
                    sysLog("System manual override. Sequence halted.", "warn");
                }
            },

            clear: function() {
                this.stop();
                document.getElementById('ccInput').value = '';
                document.getElementById('output').innerHTML = `
                    <div style="text-align:center; padding:50px; color:#333; font-family:var(--font-code);">
                        <i class="fas fa-trash-alt" style="font-size:30px; margin-bottom:15px;"></i><br>
                        MEMORY PURGED
                    </div>`;
                this.stats = { total:0, valid:0, live:0, dead:0 };
                this.brands = { visa:0, mc:0, amex:0, other:0 };
                this.liveCards = [];
                UI.updateStats();
                sysLog("Cache and UI cleared.");
                UI.updateCardVisual("#### #### #### ####", "##/##", "###", "AWAITING BIN...", "fas fa-credit-card");
            },

            copyLive: function() {
                if(this.liveCards.length === 0) {
                    alert("No live cards to copy yet!"); return;
                }
                const text = this.liveCards.join('\n');
                navigator.clipboard.writeText(text);
                sysLog(`${this.liveCards.length} Live cards copied to clipboard.`);
                alert(`${this.liveCards.length} Live cards copied!`);
            },

            process: async function() {
                if(!this.running || this.index >= this.lines.length) {
                    this.running = false; 
                    if(this.index >= this.lines.length && this.lines.length > 0) sysLog("All targets processed successfully.");
                    return;
                }

                const startTime = performance.now();
                const line = this.lines[this.index];
                
                // Advanced Extractor
                const parts = line.split(/[|:;/\s]+/);
                let cc = null, expM = '##', expY = '##', cvv = '###';

                parts.forEach(p => {
                    let cleanP = p.replace(/\D/g, '');
                    if(cleanP.length >= 13 && cleanP.length <= 19 && !cc) cc = cleanP;
                    else if(cleanP.length === 2 && parseInt(cleanP) <= 12 && expM === '##') expM = cleanP;
                    else if((cleanP.length === 2 || cleanP.length === 4) && expY === '##') expY = cleanP.slice(-2);
                    else if((cleanP.length === 3 || cleanP.length === 4) && cvv === '###') cvv = cleanP;
                });

                if(cc) {
                    const brandObj = this.getBrand(cc);
                    UI.updateCardVisual(cc, `${expM}/${expY}`, cvv, "FETCHING DB...", brandObj.icon);

                    if(this.luhn(cc)) {
                        this.stats.valid++;
                        UI.updateStats();
                        sysLog(`Auth Init -> ${cc.substring(0,6)}********`);

                        // Track Brand
                        if(brandObj.name === 'VISA') this.brands.visa++;
                        else if(brandObj.name === 'MASTERCARD') this.brands.mc++;
                        else if(brandObj.name === 'AMEX') this.brands.amex++;
                        else this.brands.other++;

                        // Fetch BIN
                        const binInfo = await BIN_ENGINE.lookup(cc.substring(0, 6));
                        const bankStr = `${binInfo.bank} [${binInfo.country}]`;
                        const typeStr = `${binInfo.type} - ${binInfo.level}`;
                        
                        UI.updateCardVisual(cc, `${expM}/${expY}`, cvv, bankStr.toUpperCase(), brandObj.icon);

                        // Gateway Node Delay Simulation (Different nodes take different times)
                        const gwNode = document.getElementById('gatewayNode') ? document.getElementById('gatewayNode').value : 'stripe';
                        let delayBase = gwNode === 'stripe' ? 400 : (gwNode === 'braintree' ? 600 : 800);
                        const delay = Math.floor(Math.random() * 800) + delayBase; 
                        await new Promise(r => setTimeout(r, delay));
                        
                        const timeTaken = Math.round(performance.now() - startTime);
                        this.simulateGateway(line, cc, brandObj, bankStr, typeStr, timeTaken);
                    } else {
                        this.stats.dead++;
                        UI.addRow(line, 'dead', 'Luhn Algorithm Failed', 'INVALID', brandObj.icon, "UNKNOWN", "N/A", 0);
                        sysLog(`Luhn Failed -> ${cc.substring(0,6)}...`, "warn");
                        this.next();
                    }
                } else {
                    this.stats.dead++;
                    UI.addRow(line, 'dead', 'Bad Format Structure', 'ERROR', 'fas fa-credit-card', "N/A", "N/A", 0);
                    this.next();
                }
            },

            next: function() {
                this.index++;
                UI.updateStats();
                if(this.running) this.process();
            },

            simulateGateway: function(line, cc, brandObj, bankStr, typeStr, timeTaken) {
                // Heuristic Simulation (30% Approval Rate)
                const isLive = Math.random() > 0.7; 
                
                // Risk Score
                let riskScore = isLive ? Math.floor(Math.random()*20) : Math.floor(Math.random()*50)+50;
                
                if(isLive) {
                    this.stats.live++;
                    this.liveCards.push(line); // Save to live array
                    const msgs = ["Charged $1.00", "CVV2 Matched", "Approved & Authorized", "Gateway Bypassed"];
                    const msg = msgs[Math.floor(Math.random()*msgs.length)];
                    UI.addRow(line, 'live', msg, 'APPROVED', brandObj.icon, bankStr, typeStr, timeTaken, riskScore);
                    
                    document.getElementById('liveCard').style.boxShadow = "0 20px 50px rgba(0,255,65,0.4)";
                    document.getElementById('liveCard').style.borderColor = "var(--success)";
                } else {
                    this.stats.dead++;
                    const msgs = ["Insufficient Funds", "Declined (05)", "Do Not Honor", "Risk Blocked", "Card Expired"];
                    const msg = msgs[Math.floor(Math.random()*msgs.length)];
                    UI.addRow(line, 'dead', msg, 'DECLINED', brandObj.icon, bankStr, typeStr, timeTaken, riskScore);
                    
                    document.getElementById('liveCard').style.boxShadow = "0 20px 50px rgba(255,0,51,0.4)";
                    document.getElementById('liveCard').style.borderColor = "var(--danger)";
                }
                
                setTimeout(() => { 
                    document.getElementById('liveCard').style.boxShadow = "0 20px 50px rgba(0,0,0,0.9)"; 
                    document.getElementById('liveCard').style.borderColor = "#333";
                }, 400);
                
                this.next();
            },

            getBrand: function(cc) {
                if(cc.startsWith('4')) return { name: 'VISA', icon: 'fab fa-cc-visa" style="color:#fff' };
                if(cc.startsWith('5')) return { name: 'MASTERCARD', icon: 'fab fa-cc-mastercard" style="color:#fff' };
                if(cc.startsWith('3')) return { name: 'AMEX', icon: 'fab fa-cc-amex" style="color:#fff' };
                if(cc.startsWith('6')) return { name: 'DISCOVER', icon: 'fab fa-cc-discover" style="color:#fff' };
                return { name: 'UNKNOWN', icon: 'fas fa-credit-card" style="color:#888' };
            },

            luhn: function(val) {
                let sum=0, d=false;
                for(let i=val.length-1; i>=0; i--) {
                    let n = parseInt(val.charAt(i));
                    if(d) { if((n*=2)>9) n-=9; }
                    sum+=n; d=!d;
                }
                return (sum%10)===0;
            }
        };

        // --- 6. UI CONTROLLER ---
        const UI = {
            addRow: function(data, type, msg, badgeTxt, iconClass, bankStr, typeStr, time, risk) {
                const div = document.createElement('div');
                div.className = `res-item ${type}`;
                div.dataset.type = type;

                let riskColor = risk > 70 ? 'var(--danger)' : (risk > 30 ? 'var(--warning)' : 'var(--success)');

                div.innerHTML = `
                    <div style="font-size:20px; width:35px; text-align:center;"><i class="${iconClass}"></i></div>
                    <div class="r-main">
                        <div class="r-num">${data}</div>
                        <div class="r-info">
                            <span class="r-tag"><i class="fas fa-university"></i> ${bankStr}</span>
                            <span class="r-tag"><i class="fas fa-id-card"></i> ${typeStr}</span>
                            <span class="r-tag"><i class="fas fa-stopwatch"></i> ${time}ms</span>
                        </div>
                    </div>
                    <div class="r-status">
                        <div class="r-badge b-${type}">${badgeTxt}</div>
                        <div class="r-meta">${msg} | Risk: <span style="color:${riskColor}">${risk}%</span></div>
                    </div>
                `;
                document.getElementById('output').prepend(div);
            },

            updateStats: function() {
                // Number updates
                document.getElementById('st-total').innerText = Nexus.stats.total;
                document.getElementById('st-valid').innerText = Nexus.stats.valid;
                document.getElementById('st-live').innerText = Nexus.stats.live;
                document.getElementById('st-dead').innerText = Nexus.stats.dead;

                // Brand Distribution Bars Update
                let totalChecked = Nexus.stats.valid || 1; // Prevent div by zero
                document.getElementById('bar-visa').style.width = `${(Nexus.brands.visa / totalChecked) * 100}%`;
                document.getElementById('pct-visa').innerText = `${Math.round((Nexus.brands.visa / totalChecked) * 100)}%`;
                
                document.getElementById('bar-mc').style.width = `${(Nexus.brands.mc / totalChecked) * 100}%`;
                document.getElementById('pct-mc').innerText = `${Math.round((Nexus.brands.mc / totalChecked) * 100)}%`;
                
                document.getElementById('bar-amex').style.width = `${(Nexus.brands.amex / totalChecked) * 100}%`;
                document.getElementById('pct-amex').innerText = `${Math.round((Nexus.brands.amex / totalChecked) * 100)}%`;
            },

            updateCardVisual: function(cc, exp, cvv, bankStr, icon) {
                let formatted = cc.padEnd(16, '#').match(/.{1,4}/g)?.join(' ') || cc;
                document.getElementById('cvNum').innerText = formatted;
                document.getElementById('cvExp').innerText = exp;
                document.getElementById('cvCvv').innerText = cvv;
                document.getElementById('cvBank').innerText = bankStr;
                document.getElementById('cvBrandIcon').className = `${icon} cv-brand`;
            },

            filter: function(type, btn) {
                document.querySelectorAll('.t-tab').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                const rows = document.querySelectorAll('.res-item');
                rows.forEach(r => {
                    if(type === 'all') r.style.display = 'flex';
                    else r.style.display = r.dataset.type === type ? 'flex' : 'none';
                });
            }
        };
    </script>
</body>
</html>
